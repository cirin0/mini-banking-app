# –î–µ—Ç–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ Proxy Pattern

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

### 1. üìù –õ–æ–≥—É–≤–∞–Ω–Ω—è

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥—ñ–≤
- ‚úÖ **Timestamp** - –∫–æ–∂–µ–Ω –ª–æ–≥ –º—ñ—Å—Ç–∏—Ç—å ISO timestamp
- ‚úÖ **Level** - info, warn, error
- ‚úÖ **Operation** - –Ω–∞–∑–≤–∞ –æ–ø–µ—Ä–∞—Ü—ñ—ó
- ‚úÖ **Module** - –º–æ–¥—É–ª—å, –¥–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –æ–ø–µ—Ä–∞—Ü—ñ—è
- ‚úÖ **Duration** - —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö
- ‚úÖ **Success** - —Å—Ç–∞—Ç—É—Å —É—Å–ø—ñ—à–Ω–æ—Å—Ç—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
- ‚úÖ **Metadata** - –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ (userId, cardNumber (–º–∞—Å–∫–æ–≤–∞–Ω–∏–π), amount, etc.)

#### –ü—Ä–∏–∫–ª–∞–¥–∏ –ª–æ–≥—ñ–≤ –∑ —Ç–µ—Å—Ç—ñ–≤:

**–£—Å–ø—ñ—à–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è:**
```json
{
  "timestamp": "2025-12-09T21:04:18.122Z",
  "level": "info",
  "operation": "createTransaction",
  "module": "transactions",
  "userId": "cmiz2j2lr0000hbcamgt7o1fv",
  "metadata": {
    "fromCardNumber": "****2066",
    "toCardNumber": "****1087",
    "amount": 1000,
    "currency": "UAH",
    "duration": "31ms",
    "success": true
  }
}
```

**–ü–æ–º–∏–ª–∫–∞:**
```json
{
  "timestamp": "2025-12-09T21:04:18.122Z",
  "level": "error",
  "operation": "createTransaction",
  "module": "transactions",
  "userId": "cmiz2j2lr0000hbcamgt7o1fv",
  "metadata": {
    "fromCardNumber": "****2066",
    "toCardNumber": "****1087",
    "amount": 100000,
    "currency": "UAH",
    "duration": "5ms",
    "success": false,
    "error": "Insufficient funds for this transaction",
    "errorStack": "BadRequestException: Insufficient funds..."
  }
}
```

#### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–∞—Å–∫—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
- ‚úÖ –ù–æ–º–µ—Ä–∏ –∫–∞—Ä—Ç–æ–∫ –º–∞—Å–∫—É—é—Ç—å—Å—è: `****2066` –∑–∞–º—ñ—Å—Ç—å –ø–æ–≤–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞
- ‚úÖ –ß—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ –Ω–µ –≤–∏–≤–æ–¥—è—Ç—å—Å—è –≤ –ª–æ–≥–∞—Ö

### 2. üîí –ë–µ–∑–ø–µ–∫–∞

#### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ –±–µ–∑–ø–µ–∫–∏ –≤ Proxy:

**TransactionsServiceProxy:**
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —Å—É–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó (1,000,000)
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—ó —Å—É–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó (0.1)
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–∞—Ä—Ç–æ–∫ (`validateUserAccess`)
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è —Å–ø—Ä–æ–± –¥–æ—Å—Ç—É–ø—É –¥–æ —á—É–∂–∏—Ö –∫–∞—Ä—Ç–æ–∫

**AccountsServiceProxy:**
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ (userId, accountId, amount)
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ –±–µ–∑–ø–µ–∫–∏ (ForbiddenException)
- ‚úÖ –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –æ–ø–µ—Ä–∞—Ü—ñ–π –¥–µ–ø–æ–∑–∏—Ç—É

**CardsServiceProxy:**
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ä—Ç–æ–∫
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è —Å–ø—Ä–æ–± –¥–æ—Å—Ç—É–ø—É –¥–æ CVV
- ‚úÖ –ú–∞—Å–∫—É–≤–∞–Ω–Ω—è –Ω–æ–º–µ—Ä—ñ–≤ –∫–∞—Ä—Ç–æ–∫

#### –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—ñ–≤ –±–µ–∑–ø–µ–∫–∏:
- ‚úÖ –ù–µ –¥–æ–∑–≤–æ–ª—è—î –¥–æ—Å—Ç—É–ø –±–µ–∑ —Ç–æ–∫–µ–Ω—É
- ‚úÖ –ù–µ –¥–æ–∑–≤–æ–ª—è—î –¥–æ—Å—Ç—É–ø –¥–æ —á—É–∂–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É
- ‚úÖ –ù–µ –¥–æ–∑–≤–æ–ª—è—î –¥–µ–ø–æ–∑–∏—Ç –Ω–∞ —á—É–∂–∏–π —Ä–∞—Ö—É–Ω–æ–∫
- ‚úÖ –ù–µ –¥–æ–∑–≤–æ–ª—è—î —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –∑ —á—É–∂–∏—Ö –∫–∞—Ä—Ç–æ–∫

### 3. üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

#### –ó–±—ñ—Ä –º–µ—Ç—Ä–∏–∫:
- ‚úÖ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ–π –ø–æ –∫–æ–∂–Ω–æ–º—É –º–µ—Ç–æ–¥—É
- ‚úÖ –°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- ‚úÖ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –û—Å—Ç–∞–Ω–Ω—ñ–π —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

#### –ú–µ—Ç—Ä–∏–∫–∏ –∑–±–∏—Ä–∞—é—Ç—å—Å—è –¥–ª—è:
- ‚úÖ Transactions –º–æ–¥—É–ª—å (createTransaction, getAllTransactions, etc.)
- ‚úÖ Accounts –º–æ–¥—É–ª—å (createAccountForUser, depositToAccount, etc.)
- ‚úÖ Cards –º–æ–¥—É–ª—å (createCardForAccount, getCvvForCard, etc.)

#### –î–æ—Å—Ç—É–ø –¥–æ –º–µ—Ç—Ä–∏–∫:
- ‚úÖ `MonitoringService.getModuleStats(moduleName)` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–æ–¥—É–ª—é
- ‚úÖ `MonitoringService.getAllStats()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å—ñ—Ö –º–æ–¥—É–ª—è—Ö
- ‚úÖ `MonitoringService.getMetricsSummary()` - –∑–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ `MonitoringController` - HTTP endpoints –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –º–µ—Ç—Ä–∏–∫

### 4. ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è

#### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó:

**TransactionsRepositoryProxy:**
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è cardId, cardNumber, transactionId
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ executeTransaction

**TransactionsServiceProxy:**
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Å—É–º (–º—ñ–Ω—ñ–º–∞–ª—å–Ω–∞/–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞)
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è userId –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø—É

**AccountsRepositoryProxy:**
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è accountId, userId
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Å—É–º –¥–µ–ø–æ–∑–∏—Ç—É

**AccountsServiceProxy:**
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Å—ñ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –ø–µ—Ä–µ–¥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª—ñ–º—ñ—Ç—ñ–≤ —Ä–∞—Ö—É–Ω–∫—ñ–≤

**CardsServiceProxy:**
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ä—Ç–æ–∫
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–æ—Å—Ç—É–ø—É –¥–æ CVV

### 5. üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—ñ–≤

**–í—Å—ñ 26 —Ç–µ—Å—Ç—ñ–≤ –ø—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ:**
- ‚úÖ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (4 —Ç–µ—Å—Ç–∏)
- ‚úÖ –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä–∞—Ö—É–Ω–∫—ñ–≤ (3 —Ç–µ—Å—Ç–∏)
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ä—Ç (3 —Ç–µ—Å—Ç–∏)
- ‚úÖ –î–µ–ø–æ–∑–∏—Ç –Ω–∞ —Ä–∞—Ö—É–Ω–æ–∫ (3 —Ç–µ—Å—Ç–∏)
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –º—ñ–∂ –∫–∞—Ä—Ç–∞–º–∏ (7 —Ç–µ—Å—Ç—ñ–≤)
- ‚úÖ –ü–µ—Ä–µ–≥–ª—è–¥ —ñ—Å—Ç–æ—Ä—ñ—ó —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π (3 —Ç–µ—Å—Ç–∏)
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ –±–µ–∑–ø–µ–∫–∏ (3 —Ç–µ—Å—Ç–∏)

### 6. üìà –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

#### –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π (–∑ —Ç–µ—Å—Ç—ñ–≤):
- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è: ~165ms
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è: ~130ms
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ä—Ç: ~15-20ms
- –î–µ–ø–æ–∑–∏—Ç: ~15ms
- –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó: ~20-50ms
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö: ~7-18ms

### 7. üîç –î–µ—Ç–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

#### BaseLoggerProxy:
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –ª–æ–≥–∏
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ MonitoringService
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è –∑ duration
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑ stack trace

#### MonitoringService:
- ‚úÖ –ó–±—ñ—Ä –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö –º–µ—Ç—Ä–∏–∫
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–æ–¥—É–ª—è—Ö
- ‚úÖ –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫

–í—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ Proxy Pattern –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø—Ä–∞—Ü—é—î –∑ –ø–æ–≤–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é
- ‚úÖ –ë–µ–∑–ø–µ–∫–∞ –∑–∞–±–µ–∑–ø–µ—á—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø—É
- ‚úÖ –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∑–±–∏—Ä–∞—î –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –ø—Ä–∞—Ü—é—î –Ω–∞ –≤—Å—ñ—Ö —Ä—ñ–≤–Ω—è—Ö
- ‚úÖ –ú–∞—Å–∫—É–≤–∞–Ω–Ω—è —á—É—Ç–ª–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ

